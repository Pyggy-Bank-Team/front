@page "/login"
@using Funtik.Models.Services
@layout LoginLayout
@inject IIdentityService IdentityService

<div>
    <div>@_token</div>
    <div>
        <label>Login</label>
        <input value="@_user"/>
    </div>
    <div>
        <label>Password</label>
        <input value="@_password" type="password"/>
    </div>
    <button @onclick="OnSignIn">Sign in</button>
</div>

@code{
    private string _user;
    private string _password;
    private string _token;

    public async Task OnSignIn()
    {
        var userModel = new UserModel
        {
            UserName = _user,
            Password = _password
        };

        var token = await IdentityService.GetToken(userModel);
        _token = token.AccessToken;
    }
}